<html>
  <head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <style>
      body { margin: 0; overflow: hidden; }

      /* Loading Screen */
      #loading {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: #111;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 18px;
        z-index: 10;
      }

      /* Responsive UI Controls */
      .controls {
        position: fixed;
        bottom: 2vh;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 1.2vh;
        z-index: 5;
      }

      .btn {
        padding: 1vh 1.5vh;
        background: rgba(255,255,255,0.85);
        border-radius: 1vh;
        border: none;
        font-size: 1.8vh;
        font-weight: bold;
        backdrop-filter: blur(5px);
      }

      /* Device Detect: Desktop UI */
      @media (min-width: 768px) {
        .controls {
          bottom: 20px;
        }
        .btn {
          padding: 12px 18px;
          font-size: 16px;
        }
      }
    </style>
  </head>

  <body>
    <!-- Loading Screen -->
    <div id="loading">Loading AR Model...</div>

    <!-- UI Buttons -->
    <div class="controls">
      <button class="btn" onclick="rotateLeft()">↺ Rotate</button>
      <button class="btn" onclick="zoomIn()">＋ Zoom In</button>
      <button class="btn" onclick="zoomOut()">－ Zoom Out</button>
      <button class="btn" onclick="resetModel()">⟳ Reset</button>
    </div>

    
    <a-scene 
      embedded
      vr-mode-ui="enabled: false"
      renderer="logarithmicDepthBuffer: true;"
      arjs="sourceType: webcam; debugUIEnabled: false;">
      
      <!-- Lighting -->
      <a-entity light="type: ambient; intensity: 1"></a-entity>
      <a-entity light="type: directional; intensity: 0.8" position="1 1 1"></a-entity>

      <!-- Marker -->
      <a-marker type="pattern" url="assets/p7.patt">
        
        <!-- Model -->
        <a-entity 
          id="model"
          gltf-model="assets/p7.glb"
          position="0 0 0"
          rotation="0 0 0"
          scale="0.6 0.6 0.6"
          animation-mixer>
        </a-entity>

      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>


<script>
  const model = document.getElementById("model");

  // Loading screen hilang saat model selesai dimuat
  model.addEventListener("model-loaded", () => {
    document.getElementById("loading").style.display = "none";
  });

  // Nilai default
  let currentScale = 0.6;
  let currentRotation = 0;

  // ROTATE
  function rotateLeft() {
    currentRotation += 15;
    model.setAttribute("rotation", `0 ${currentRotation} 0`);
  }

  // ZOOM IN
  function zoomIn() {
    currentScale += 0.05;
    model.setAttribute("scale", `${currentScale} ${currentScale} ${currentScale}`);
  }

  // ZOOM OUT
  function zoomOut() {
    currentScale -= 0.05;
    if (currentScale < 0.2) currentScale = 0.2;
    model.setAttribute("scale", `${currentScale} ${currentScale} ${currentScale}`);
  }

  // RESET
  function resetModel() {
    currentScale = 0.6;
    currentRotation = 0;
    model.setAttribute("scale", "0.6 0.6 0.6");
    model.setAttribute("rotation", "0 0 0");
  }
</script>

  </body>
</html>

