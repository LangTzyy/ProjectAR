<!DOCTYPE html>
<html>
  <head>
    <title>Project AR WebAR</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js@3.4.5/aframe/build/ar.js"></script>

    <!-- Gesture Controller -->
    <script src="https://cdn.jsdelivr.net/gh/fcor/arjs-gestures@master/dist/gestures.js"></script>

    <style>
      body { margin: 0; overflow: hidden; }
    </style>
  </head>

  <body>
    <a-scene 
      embedded
      renderer="logarithmicDepthBuffer: true;"
      vr-mode-ui="enabled: false"
      arjs="sourceType: webcam; debugUIEnabled: false;"
      gesture-detector
    >
      <!-- Marker -->
      <a-marker type="pattern" url="assets/p7.patt">
        
        <!-- Model -->
        <a-entity id="model"
          gltf-model="url(assets/p7.glb)"
          scale="0.8 0.8 0.8"
          position="0 0 0"
          rotation="0 0 0"
          gesture-handler="minScale: 0.3; maxScale: 3"
        ></a-entity>

      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      // -------------------------
      // TAP GESTURE â€“ UBAH POSISI
      // -------------------------
      let tapCount = 0;
      const model = document.getElementById("model");

      document.body.addEventListener("click", () => {
        tapCount++;

        if (tapCount === 1) {
          // Mode berdiri
          model.setAttribute("rotation", "0 0 0");
        }

        if (tapCount === 2) {
          // Mode tidur (rebahan)
          model.setAttribute("rotation", "90 0 0");
          tapCount = 0; // reset
        }
      });
    </script>
  </body>
</html>
